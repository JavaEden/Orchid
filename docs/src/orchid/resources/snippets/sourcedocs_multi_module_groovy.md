---
---

### Configuration

An example of multi-module configuration is below. Most properties are optional.

```yaml
groovydoc:
  modules:
    - name: 'project-1-name'
      slug: 'project-1'
      moduleGroup: 'group-a'
      sourceDirs: ['../module-one/src/main/groovy', '../module-one/src/main/java']
      homePagePermalink: '...'
      sourcePagePermalink: '...'
      showRunnerLogs: false
      homePageOnly: false
      args: []
      relatedModules: ['project-2-name']
    - name: 'project-2-name'
      ...
```

| Description                                                                                     | Option                | Default Value |
| ----------------------------------------------------------------------------------------------- | --------------------- | ------------- |
| The name of the module, which becomes the title of the module Homepage.                         | `name`                | `false`       |
| The slug prepended to page URLs from this module.                                               | `slug`                | ``            |
| Group multiple modules together for easier configuration and improved site hierarchy.           | `moduleGroup`         | `[]`          |
| Relative paths to directories containing Groovy or Java source code.                            | `sourceDirs`          | `[]`          |
| Customize the URL path for the homepage.                                                        | `homePagePermalink`   | see below     |
| Customize the URL path for class and package pages.                                             | `sourcePagePermalink` | see below     |
| Whether to print logs from the underlying Groovydoc CLI                                         | `showRunnerLogs`      | `false`       |
| If true, do not run Groovydoc. Create docs a module with only a homepage.                       | `homePageOnly`        | `false`       |
| A list of other modules which contain sources that may be linked to by the pages in this module | `relatedModules`      | `[]`          |
| Additional args to pass-through to the Groovydoc CLI.                                           | `args`                | `[]`          |

### Permalinks

Permalinks can be customized for all pages generated by this plugin. For each module, you can set `homePagePermalink` or
`sourcePagePermalink` with your desired permalink string. The following dynamic path segments are available for these
pages (in addition to the standard permalink keys):

- `:moduleType` - The "type" of source code you're documenting (`groovydoc`) 
- `:moduleGroup` - The module group at declared in the module configuration 
- `:module` - The name of this specific module
- `:sourceDocPath` - The path for each source code doc page, as defined by the Groovydoc plugin

The default permalinks are as follows:

| Description       | Permalink pattern                                 | Example without module group                   | Example with module group                              |
| ----------------- | ------------------------------------------------- | ---------------------------------------------- | ------------------------------------------------------ |
| Module home pages | `:moduleType/:moduleGroup/:module`                | `/groovydoc/project-1`                         | `/groovydoc/group-a/project-1`                         |
| Source code pages | `:moduleType/:moduleGroup/:module/:sourceDocPath` | `/groovydoc/project-1/com/app/mainapplication` | `/groovydoc/group-a/project-1/com/app/mainapplication` |

### Page Archetypes

The pages generated have several archetype keys available, for applying options to these pages in varying levels of 
granularity:

| Description                                                        | Archetype Pattern                         |
| ------------------------------------------------------------------ | ----------------------------------------- |
| Both module home and source code pages for all languages           | `sourcedoc.pages`                         |
| Just module home pages for all languages                           | `sourcedoc.moduleHomePages`               |
| Just source code pages for all languages                           | `sourcedoc.sourcePages`                   |
| Groovy module home and source code pages for all modules           | `groovydoc.pages`                         |
| Just Groovy module home pages for all modules                      | `groovydoc.moduleHomePages`               |
| Just Groovy source code pages for all modules                      | `groovydoc.sourcePages`                   |
| Just Groovy Class source code pages for all modules                | `groovydoc.classesPages`                  |
| Just Groovy Package source code pages for all modules              | `groovydoc.packagesPages`                 |
| Groovy module home and source code pages for a single module group | `groovydoc.[module group]Pages`           |
| Just Groovy module home pages for a single module group            | `groovydoc.[module group]ModuleHomePages` |
| Just Groovy source code pages for a single module group            | `groovydoc.[module group]SourcePages`     |
| Just Groovy Class source code pages for a single module group      | `groovydoc.[module group]ClassesPages`    |
| Just Groovy Package source code pages for a single module group    | `groovydoc.[module group]PackagesPages`   |

### Collections

SourceDocs generate a variety of collections which allow you to precisely query these pages. All collections will have a 
`collectionType` of the `moduleType` (`groovydoc`).  

For multiple modules, you will get a collection for each module with collectionId of its name. For each of these 
collections, it will also contain related collections containing the source pages of a specific page types, `classes` 
and `packages`. In addition, you will have a single `modules` collection which contains the READMEs of all modules.
 
| Description                 | Collection Type | Collection ID            |
| --------------------------- | --------------- | ------------------------ |
| All Groovydoc pages         | `groovydoc`     | `[module name]`          |
| All Groovydoc class pages   | `groovydoc`     | `[module name]-classes`  |
| All Groovydoc package pages | `groovydoc`     | `[module name]-packages` |
| The Groovydoc README page   | `groovydoc`     | `groovydoc-modules`      |

### Menu Items

There are 3 types of menu items available 

#### Modules

Create a menu item linking to the module home pages, optionally filtered by module group. Typically added to the Theme 
menu so it is added to all pages.

```yaml
theme:
  menu:
    - type: 'sourcedocModules'
      moduleType: 'groovydoc'
      moduleGroup: 'group-a' 
```

#### Pages

Create a menu item linking to all the source pages for a single module. You can optionally filter it by page type, 
or include all source pages for that module. Typically added to the Theme menu so it is added to all pages.

```yaml
theme:
  menu:
    - type: 'sourcedocPages'
      moduleType: 'groovydoc'
      moduleName: 'project-1-name'
      node: 'classes' # optional
```

By default, all menu items will display the title of the linked page, which is typically a human-readable version of the 
documented element. You can set `itemTitleType: 'ID'` to have it display the actual page element ID.

```yaml
theme:
  menu:
    - type: 'sourcedocPages'
      moduleType: 'groovydoc'
      moduleName: 'project-1-name'
      node: 'classes'
      itemTitleType: 'ID'
``` 

In addition, you can provide an inline Pebble template to render/transform the menu item title however you need. You 
have access to the original `title`, the target `page`, and the `element` within that template.

```yaml
theme:
  menu:
    - type: 'sourcedocPages'
      moduleType: 'groovydoc'
      moduleName: 'project-1-name'
      node: 'classes'
      itemTitleType: 'ID'
      transform: '{{ title|replace({"com.eden.orchid": "c.e.o"}) }}'
```

#### Page Links

Page Links adds menu item links to a single SourceDoc Page. It links to each "section" on that page (such as `methods`, 
`constructors`, or `fields` on a `classes` page). Setting `includeItems: true` will optionally include all that items
for each section. It is typically added to a Page's menu item through one of the above Archetypes. 

Just like `sourcedocPages`, you can customize how the menu item text is rendered with `itemTitleType`. It can be `NAME`
for the element's human-readable name, `ID` for the actual element ID, or `signature` to display the fully-formatted 
element signature.

```yaml
groovydoc:
  sourcePages:
    menu:
      - type: 'sourcedocPageLinks'
        itemTitleType: 'signature' # optional, one of [NAME, ID, SIGNATURE]
        includeItems: true # optional
```

### Filtering Docs

TODO: add docs for filtering Groovydocs
